% the almighty linguistics package
\usepackage{squarecake-ling}

% for greater font control
\usepackage{fontspec}
\usepackage{unicode-math}
\usepackage{amsmath, relsize}

% citations
\RequirePackage[hidelinks]{hyperref}
\RequirePackage{cleveref}
\RequirePackage[
	backend=biber,
	style=apa,
	sorting=ynt
]{biblatex}

%? Date handling
\usepackage{datetime2}
\DTMsavedate{startdate}{2024-11-18}

%? Text formatting
\newcommand{\detail}[1]{\textcolor{pancake@yellow}{\textit{#1}}}
\renewcommand{\orthtext}[1]{$\langle$\textcolor{pancake@cyan}{#1}$\rangle$}
\renewcommand{\native}[1]{\textcolor{pancake@cyan}{\textit{#1}}}
\renewcommand{\rom}[1]{{\textcolor{pancake@cyan}{#1}}}
\renewcommand{\phontext}[1]{[\textcolor{pancake@cyan}{#1}]}
\renewcommand{\phomtext}[1]{/{\textcolor{pancake@cyan}{#1}}/}
\renewcommand{\morphtext}[1]{⫽\textcolor{pancake@cyan}{#1}⫽}

% titles and headers
\usepackage{titlesec}
\titleformat{\chapter}[hang]{\normalfont\sffamily\LARGE}{\thechapter\hspace{.5em}\vrule width .7pt}{.5em}{}
\titleformat{\section}[hang]{\normalfont\sffamily\Large}{\thesection\hspace{.5em}\vrule width .7pt}{.5em}{}
\titleformat{\subsection}[hang]{\itshape\sffamily\large}{\thesubsection}{.5em}{}

%? Layout
\setcounter{secnumdepth}{1}
\setcounter{tocdepth}{1}

%* Header/footer
\setlength{\headheight}{15pt}

%* Font
\setmainfont{charis sil}
\setmathfont{xcharter math}
\setsansfont{fira sans}

%* Glossary
\renewcommand*{\glsnamefont}[1]{#1}

%? Shortcuts
\newcommand{\langname}{\rom{Ipcal}}
\newcommand{\allo}{\(\,\sim\,\)}

%? Baarux stuff
%* Set up new line types
\newbaarucolstyle*{mutations}{\native ,\textrightarrow\hspace{\baaruuse{cellspacing}}\rom , \trans}
\updatebaarustyle{columns}{}{\addbaaruhook{everygloss}{\baarucolwidth{1}{3.25cm}}}
\newenvironment{multiexample}[1][]{\example\textbf{#1}\examples}{\endexamples\endexample}

%? Glossing abbreviations
\loadglsentries{abbreviations.tex}
